name: Send Notification

on: 
  issues:
    types: [opened]
  pull_request:
    types: [opened]
    
jobs:
  job1:
    runs-on: ubuntu-latest
    steps:
      - name: Send notifcation on issue creation
        run: |
          curl --location --request POST '${{secrets.WEBHOOK_CHAT}}' \
          --header 'Content-Type: application/json' \
          --data-raw '{
              "cards": [
                  {
                      "header": {
                          "title": "ISSUE: ${{ github.event.issue.title }}",
                          "subtitle": "By ${{ github.event.issue.user.login }}",
                          "imageUrl": "https://goo.gl/aeDtrS",
                          "imageStyle": "IMAGE"
                      },
                      "sections": {
                          "widgets": [
                              {
                                  "buttons": [
                                      {
                                          "textButton": {
                                              "text": "Open Issue",
                                              "onClick": {
                                                  "openLink": {
                                                      "url": "${{ github.event.issue.html_url }}"
                                                  }
                                              }
                                          }
                                      }
                                  ],
                                  "textParagraph": {
                                      "text": "${{ github.event.issue.body }}"
                                  }
                              }
                          ]
                      }
                  }
              ]
          }'
            
          
        
    

